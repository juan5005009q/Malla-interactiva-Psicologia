<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular - Psicología UBA</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #2c3e50;
    }

    .malla {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .semestre {
      background: #ffffff;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      width: 250px;
    }

    .semestre h2 {
      font-size: 1.2em;
      margin-bottom: 10px;
      color: #34495e;
    }

    .materia {
      padding: 8px 10px;
      margin-bottom: 8px;
      border-radius: 5px;
      background: #ecf0f1;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
    }

    .materia:hover {
      background: #d0e4f0;
    }

    .materia.aprobada {
      background: #a8e6cf;
      text-decoration: line-through;
    }

    .materia.bloqueada {
      background: #f5b7b1;
      cursor: not-allowed;
      opacity: 0.6;
    }

    .materia[title]:hover::after {
      content: attr(title);
      position: absolute;
      bottom: 100%;
      left: 0;
      background: #333;
      color: #fff;
      padding: 4px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      white-space: nowrap;
      transform: translateY(-5px);
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Psicología UBA</h1>
  <div class="malla" id="malla"></div>

  <script>
    const materias = [
      { id: 'cat1', nombre: 'Cátedra 1', semestre: 1 },
      { id: 'com', nombre: 'Competencias comunicativas', semestre: 1 },
      { id: 'epis', nombre: 'Epistemología', semestre: 1 },
      { id: 'mat', nombre: 'Matemáticas Básicas', semestre: 1 },
      { id: 'dig', nombre: 'Competencias digitales', semestre: 1 },
      { id: 'hist', nombre: 'Historiografía de la Psicología', semestre: 1 },

      { id: 'arg', nombre: 'Argumentación y Producción de textos', semestre: 2, req: ['com'] },
      { id: 'ant', nombre: 'Antropología Social y Cultural', semestre: 2 },
      { id: 'est', nombre: 'Estadística Descriptiva', semestre: 2, req: ['mat'] },
      { id: 'ing1', nombre: 'Inglés I', semestre: 2 },
      { id: 'neuro1', nombre: 'Neurociencia Social', semestre: 2 },
      { id: 'proc1', nombre: 'Procesos Psicológicos', semestre: 2 },

      { id: 'bio', nombre: 'Bioética', semestre: 3 },
      { id: 'ing2', nombre: 'Inglés II', semestre: 3, req: ['ing1'] },
      { id: 'div', nombre: 'Divergencias Sociales Globales', semestre: 3 },
      { id: 'elec1', nombre: 'Electiva Profesional I', semestre: 3 },
      { id: 'prog', nombre: 'Fundamentos de Programación', semestre: 3 },
      { id: 'neuro2', nombre: 'Neurociencia Cognitiva Aplicada', semestre: 3, req: ['neuro1'] },
      { id: 'progInv1', nombre: 'Programas de Investigación I', semestre: 3 },

      { id: 'ing3', nombre: 'Inglés III', semestre: 4, req: ['ing2'] },
      { id: 'pens', nombre: 'Pensamiento Político y Económico', semestre: 4 },
      { id: 'fin', nombre: 'Finanzas', semestre: 4 },
      { id: 'compInv', nombre: 'Competencias Investigativas', semestre: 4 },
      { id: 'gest', nombre: 'Gestión Digital e Innovación', semestre: 4 },
      { id: 'progInv2', nombre: 'Programas de Investigación II', semestre: 4, req: ['progInv1'] },
      { id: 'psicom', nombre: 'Psicometría', semestre: 4, req: ['est'] },

      { id: 'cat2', nombre: 'Cátedra II', semestre: 5 },
      { id: 'psysoc', nombre: 'Psicología y Sociedad', semestre: 5 },
      { id: 'ing4', nombre: 'Inglés IV', semestre: 5, req: ['ing3'] },
      { id: 'disInv', nombre: 'Diseños Investigativos', semestre: 5 },
      { id: 'apr', nombre: 'Teorías de Aprendizaje', semestre: 5 },
      { id: 'dev', nombre: 'Psicología del Desarrollo', semestre: 5 },

      { id: 'ing5', nombre: 'Inglés V', semestre: 6, req: ['ing4'] },
      { id: 'invSoc', nombre: 'Investigación Social', semestre: 6 },
      { id: 'pers', nombre: 'Teorías de Personalidad', semestre: 6 },
      { id: 'jur', nombre: 'Psicología Jurídica', semestre: 6 },
      { id: 'eval', nombre: 'Evaluación Psicológica', semestre: 6 },
      { id: 'psicoPat', nombre: 'Psicopatología', semestre: 6 },

      { id: 'elecInt', nombre: 'Electiva Integral', semestre: 7 },
      { id: 'ing6', nombre: 'Inglés VI', semestre: 7, req: ['ing5'] },
      { id: 'dir', nombre: 'Dirección y Gestión de Proyectos 2', semestre: 7 },
      { id: 'disInv2', nombre: 'Diseños Investigativos 2', semestre: 7, req: ['disInv'] },
      { id: 'trab', nombre: 'Psicología del Trabajo', semestre: 7 },
      { id: 'clin1', nombre: 'Psicología Clínica y de la Salud', semestre: 7 },
      { id: 'org', nombre: 'Psicología Organizacional', semestre: 7 },

      { id: 'cat3', nombre: 'Cátedra III', semestre: 8 },
      { id: 'procInv', nombre: 'Procesos Investigativos', semestre: 8 },
      { id: 'profClin', nombre: 'Profundización Clínica', semestre: 8, req: ['clin1'] },
      { id: 'edu', nombre: 'Psicología Educativa y Desarrollo Humano', semestre: 8 },
      { id: 'socAmb', nombre: 'Psicología Social y Comunitaria', semestre: 8 },

      { id: 'elec2', nombre: 'Electiva Profesional II', semestre: 9 },
      { id: 'apr2', nombre: 'Otras Teorías del Aprendizaje', semestre: 9 },
      { id: 'practClin', nombre: 'Práctica Clínica y de la Salud', semestre: 9, req: ['profClin'] },
      { id: 'otrosCont', nombre: 'Profundización en Otros Contextos', semestre: 9 },

      { id: 'grado', nombre: 'Opción de Grado', semestre: 10 },
      { id: 'practOtros', nombre: 'Práctica en Otros Contextos', semestre: 10 },
    ];

    const progreso = JSON.parse(localStorage.getItem('progresoPsicoUBA') || '{}');

    function crearMalla() {
      const container = document.getElementById('malla');
      for (let i = 1; i <= 10; i++) {
        const col = document.createElement('div');
        col.className = 'semestre';
        col.innerHTML = `<h2>Semestre ${i}</h2>`;
        materias.filter(m => m.semestre === i).forEach(materia => {
          const el = document.createElement('div');
          el.className = 'materia';
          el.textContent = materia.nombre;
          el.dataset.id = materia.id;
          if (progreso[materia.id]) el.classList.add('aprobada');
          col.appendChild(el);
        });
        container.appendChild(col);
      }
    }

    function actualizarEstado() {
      document.querySelectorAll('.materia').forEach(el => {
        const id = el.dataset.id;
        const mat = materias.find(m => m.id === id);
        el.classList.remove('bloqueada');
        el.removeAttribute('title');
        if (mat.req) {
          const noCumple = mat.req.filter(req => !progreso[req]);
          if (noCumple.length > 0) {
            el.classList.add('bloqueada');
            el.title = 'Requiere: ' + noCumple.map(id => materias.find(m => m.id === id).nombre).join(', ');
          }
        }
      });
    }

    function toggleMateria(el) {
      const id = el.dataset.id;
      const mat = materias.find(m => m.id === id);
      if (el.classList.contains('bloqueada')) return;
      el.classList.toggle('aprobada');
      progreso[id] = el.classList.contains('aprobada');
      localStorage.setItem('progresoPsicoUBA', JSON.stringify(progreso));
      actualizarEstado();
    }

    document.addEventListener('DOMContentLoaded', () => {
      crearMalla();
      actualizarEstado();
      document.querySelectorAll('.materia').forEach(el => {
        el.addEventListener('click', () => toggleMateria(el));
      });
    });
  </script>
</body>
</html>
